<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Anamika â¤ï¸</title>
  <style>
    :root{
      --bg1:#ffe6ee;
      --bg2:#ff9bb3;
      --card:#ffffffcc;
      --text:#231f20;
      --accent:#ff2d6d;
      --accent2:#7c3aed;
      --soft: rgba(0,0,0,.06);
      --shadow: 0 20px 60px rgba(0,0,0,.15);
    }
    *{box-sizing:border-box}
   body{
  margin:0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
  min-height:100vh;

  /* âœ… allow scrolling on mobile */
  overflow-y: auto;
  overflow-x: hidden;
  -webkit-overflow-scrolling: touch;

  /* âœ… donâ€™t lock the page */
  display: block;

  background:
    radial-gradient(1200px 700px at 20% 10%, #fff6, transparent 60%),
    radial-gradient(900px 600px at 80% 20%, #fff4, transparent 55%),
    linear-gradient(135deg, var(--bg1), var(--bg2));
  color:var(--text);
  .gate, .card{
  margin: 18px auto;
}
}

    .floating-hearts{position:fixed; inset:0; pointer-events:none; opacity:.55;}
    .heart{
      position:absolute;
      width:18px;height:18px;
      transform: rotate(45deg);
      background: rgba(255,45,109,.45);
      animation: floatUp linear infinite;
      border-radius: 4px;
    }
    .heart:before,.heart:after{
      content:"";
      position:absolute;
      width:18px;height:18px;
      background: inherit;
      border-radius: 50%;
    }
    .heart:before{ left:-9px; top:0; }
    .heart:after{ left:0; top:-9px; }
    @keyframes floatUp{
      from{ transform: translateY(110vh) rotate(45deg); }
      to{ transform: translateY(-20vh) rotate(45deg); }
    }

    .card{
      width:min(1120px, 92vw);
      background: var(--card);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.55);
      border-radius: 24px;
      box-shadow: var(--shadow);
      padding: clamp(18px, 3.2vw, 34px);
      position:relative;
      display:none;
    }
    .card.show{ display:block; }

    .top{
      display:grid;
      gap:18px;
      grid-template-columns: 1.15fr .85fr;
      align-items:center;
    }
    @media (max-width: 920px){
      .top{ grid-template-columns: 1fr; }
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 14px;
      border-radius:999px;
      background: rgba(255,255,255,.78);
      border:1px solid rgba(0,0,0,.06);
      width: fit-content;
      font-weight:1100;
    }
    .pill .dot{
      width:10px;height:10px;border-radius:50%;
      background: var(--accent);
      box-shadow:0 0 0 5px rgba(255,45,109,.18);
    }

    h1{
      margin:10px 0 0 0;
      font-size: clamp(30px, 4vw, 50px);
      letter-spacing:-.6px;
      line-height:1.03;
    }
    .sub{
      margin-top:10px;
      font-size: clamp(14px, 1.5vw, 17px);
      opacity:.92;
      line-height:1.55;
    }

    /* gallery */
    .galleryWrap{
      border-radius: 18px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.65);
    }
    .galleryMain{
      position:relative;
      width:100%;
      aspect-ratio: 4 / 3;
      background: rgba(255,255,255,.45);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }
    .galleryMain img{
      width:100%;
      height:100%;
      object-fit:cover;
      display:block;
      filter: saturate(1.05);
    }
    .galleryNav{
      display:flex;
      gap:10px;
      padding:10px;
      align-items:center;
      justify-content:space-between;
      flex-wrap:wrap;
      background: rgba(255,255,255,.75);
      border-top:1px solid rgba(0,0,0,.06);
    }
    .thumbs{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; }
    .thumb{
      width:54px; height:42px;
      border-radius: 10px;
      overflow:hidden;
      border:1px solid rgba(0,0,0,.12);
      cursor:pointer;
      opacity:.85;
      transform: translateY(0);
      transition: opacity .12s ease, transform .12s ease;
    }
    .thumb:hover{ opacity:1; transform: translateY(-1px); }
    .thumb.active{ outline: 3px solid rgba(255,45,109,.35); opacity:1; }
    .thumb img{ width:100%; height:100%; object-fit:cover; display:block; }
    .gbtns{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .hint{ font-size:12px; opacity:.75; margin:0; }

    .grid{
      margin-top: 18px;
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:12px;
    }
    @media (max-width: 920px){
      .grid{ grid-template-columns: 1fr; }
    }
    .box{
      background: rgba(255,255,255,.78);
      border:1px solid rgba(0,0,0,.06);
      border-radius:16px;
      padding:14px 14px 16px;
    }
    .box h3{ margin:0 0 8px 0; font-size:16px; display:flex; align-items:center; gap:8px; font-weight:1100;}
    .box p{ margin:0; font-size:14px; line-height:1.45; opacity:.95;}

    .question{
      margin-top: 18px;
      padding: 18px;
      border-radius: 18px;
      border:1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.86);
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:14px;
      flex-wrap:wrap;
      position:relative;
      overflow:hidden;
    }
    .qtext{
      font-size: clamp(18px, 2vw, 22px);
      font-weight:1200;
      letter-spacing:-.2px;
      flex: 1 1 240px;
    }
    .buttons{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      position:relative;
      min-height:48px;
      justify-content:flex-end;
    }

    button{
      border:none;
      font-weight:1100;
      font-size:14px;
      padding: 11px 14px;
      border-radius: 14px;
      cursor:pointer;
      transition: transform .08s ease, box-shadow .12s ease, background .12s ease;
      user-select:none;
      position:relative;
      white-space:nowrap;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
    }
    button:hover{ transform: translateY(-1px); }

    .btn-yes{ background: linear-gradient(135deg, var(--accent), #ff6b93); color:white; box-shadow: 0 10px 20px rgba(255,45,109,.25); }
    .secondary{ background: rgba(0,0,0,.06); border:1px solid rgba(0,0,0,.1); color:#222; box-shadow:none; font-weight:1200; }
    .btn-note{ background: linear-gradient(135deg, #f72585, #7209b7); color:white; box-shadow: 0 10px 20px rgba(114,9,183,.18); }
    .btn-memory{ background: linear-gradient(135deg, #4361ee, #4cc9f0); color:white; box-shadow: 0 10px 20px rgba(67,97,238,.18); }
    .btn-letter{ background: linear-gradient(135deg, #ff8fab, #c77dff); color:#2b1b00; box-shadow: 0 10px 20px rgba(199,125,255,.18); }
    .btn-date{ background: linear-gradient(135deg, #ff477e, #ffd166); color:#2b1b00; box-shadow: 0 10px 20px rgba(255,209,102,.18); }
    .btn-surprise{ background: linear-gradient(135deg, #ff5d8f, #b5179e); color:white; box-shadow: 0 10px 20px rgba(181,23,158,.18); }

    .panel{
      margin-top: 14px;
      background: rgba(255,255,255,.82);
      border:1px solid rgba(0,0,0,.06);
      border-radius:16px;
      padding:14px;
      display:none;
    }
    .panel.show{ display:block; }
    .panelTitle{ font-weight:1200; margin:0 0 8px 0; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .counter{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.9);
      font-weight:1200;
    }
    .tiny{
      font-size:12px;
      opacity:.78;
      margin:8px 0 0 0;
      line-height:1.55;
      white-space:pre-wrap;
    }

    /* timeline */
    .timeline{ display:grid; gap:10px; margin-top: 8px; }
    .titem{
      background: rgba(255,255,255,.88);
      border:1px solid rgba(0,0,0,.06);
      border-radius: 14px;
      padding:12px;
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .badge{
      flex:0 0 auto;
      font-weight:1200;
      font-size:12px;
      padding:6px 10px;
      border-radius:999px;
      background: var(--soft);
      border:1px solid rgba(0,0,0,.06);
    }
    .ttext b{ display:block; margin-bottom:4px; }
    .ttext{ font-size:13px; line-height:1.45; opacity:.92; }

    /* date cards */
    .dateCards{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
      margin-top: 10px;
    }
    @media (max-width: 920px){
      .dateCards{ grid-template-columns: 1fr; }
    }
    .dcard{
      background: rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.06);
      border-radius: 16px;
      padding: 12px;
    }
    .dcard h4{ margin:0 0 6px 0; font-weight:1200; }
    .dcard p{ margin:0 0 10px 0; font-size:13px; opacity:.9; line-height:1.45; }
    .dcard button{ width:100%; }

    /* QUEST GAME */
    .quest{
      background: rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.06);
      border-radius: 18px;
      padding: 14px;
    }
    .questTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding:8px 12px;
      border-radius:999px;
      background: rgba(0,0,0,.06);
      border:1px solid rgba(0,0,0,.08);
      font-weight:1200;
      font-size:13px;
    }
    .qbox{
      margin-top: 12px;
      padding: 12px;
      border-radius: 16px;
      border:1px solid rgba(0,0,0,.06);
      background: rgba(255,255,255,.92);
    }
    .qbox h4{ margin:0 0 8px 0; font-weight:1300; }
    .qbox p{ margin:0 0 12px 0; opacity:.92; line-height:1.5; }
    .opts{ display:grid; gap:8px; }
    .opt{
      width:100%;
      justify-content:flex-start;
      background: rgba(0,0,0,.06);
      border:1px solid rgba(0,0,0,.08);
      color:#222;
      box-shadow:none;
    }
    .opt.correct{ background: rgba(6,214,160,.25); border-color: rgba(6,214,160,.35); }
    .opt.wrong{ background: rgba(255,45,109,.18); border-color: rgba(255,45,109,.28); }

    /* letter */
    .letterBox{
      background: rgba(255,255,255,.9);
      border:1px solid rgba(0,0,0,.06);
      border-radius:16px;
      padding: 14px;
      margin-top:10px;
      line-height:1.65;
      font-size: 14px;
      white-space:pre-wrap;
    }
    .cursor{ display:inline-block; width:10px; animation: blink 1s steps(2) infinite; }
    @keyframes blink{ 50%{ opacity:0; } }

    /* modal */
    .modal{
      position:fixed;
      inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      background: rgba(0,0,0,.45);
      padding: 18px;
      z-index:20;
    }
    .modal.open{ display:flex; }
    .modalCard{
      width:min(900px, 94vw);
      background:white;
      border-radius: 22px;
      padding: 22px;
      box-shadow: 0 30px 90px rgba(0,0,0,.25);
      position:relative;
      overflow:hidden;
    }
    .modalCard:before{
      content:"";
      position:absolute;
      inset:-40px;
      background:
        radial-gradient(300px 240px at 20% 20%, rgba(255,45,109,.20), transparent 60%),
        radial-gradient(360px 260px at 80% 30%, rgba(124,58,237,.18), transparent 60%);
      pointer-events:none;
    }
    .modalCard > *{ position:relative; }
    .modalTitle{
      font-size: clamp(26px, 3vw, 38px);
      margin:0 0 8px 0;
      letter-spacing:-.4px;
      font-weight:1300;
    }
    .modalText{
      margin:0 0 14px 0;
      font-size: 16px;
      line-height:1.7;
      opacity:.96;
      white-space:pre-wrap;
    }
    .closeRow{
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:center;
      flex-wrap:wrap;
      margin-top: 10px;
    }

    canvas#confetti{
      position:fixed;
      inset:0;
      pointer-events:none;
      z-index:30;
      display:none;
    }
    canvas#confetti.show{ display:block; }

    .sparkle{
      position:fixed;
      width:10px; height:10px;
      border-radius: 50%;
      background: rgba(255,255,255,.95);
      box-shadow: 0 0 20px rgba(255,255,255,.8);
      pointer-events:none;
      z-index:25;
      animation: sparkle 700ms ease-out forwards;
    }
    @keyframes sparkle{
      from{ transform: translate(-50%,-50%) scale(1); opacity:1; }
      to{ transform: translate(-50%,-50%) scale(0); opacity:0; }
    }

    /* gate */
    .gate{
      width:min(720px, 92vw);
      background: rgba(255,255,255,.80);
      backdrop-filter: blur(10px);
      border:1px solid rgba(255,255,255,.55);
      border-radius: 24px;
      box-shadow: var(--shadow);
      padding: 18px;
    }
    .gate h2{ margin:0 0 6px 0; font-size: 24px; letter-spacing:-.3px; }
    .gate p{ margin:0 0 12px 0; opacity:.9; line-height:1.5; }
    .gateRow{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    input{
      flex: 1 1 220px;
      padding: 12px 14px;
      border-radius: 14px;
      border:1px solid rgba(0,0,0,.12);
      background: rgba(255,255,255,.92);
      font-weight:900;
      outline:none;
    }
    .gate small{ display:block; margin-top:10px; opacity:.7; }
    .shake{ animation: shake 280ms ease-in-out; }
    @keyframes shake{
      0%,100%{ transform: translateX(0); }
      25%{ transform: translateX(-8px); }
      75%{ transform: translateX(8px); }
    }

    .footer{
      margin-top:14px;
      font-size:12px;
      opacity:.78;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .footer code{
      background: rgba(0,0,0,.06);
      padding: 2px 6px;
      border-radius: 8px;
    }
  </style>
</head>

<body>
  <div class="floating-hearts" id="hearts"></div>
  <canvas id="confetti"></canvas>

  <!-- PASSWORD GATE -->
  <div class="gate" id="gate">
    <h2>Only Anamika can enter ğŸ˜ŒğŸ’˜</h2>
    <p>Question: what do I call you the most?</p>
    <div class="gateRow">
      <input id="gateInput" placeholder="Type it hereâ€¦" autocomplete="off" />
      <button class="btn-yes" id="gateBtn">Unlock ğŸ”“</button>
    </div>
    <small>Hint: itâ€™s one of your nicknames (Annama / Yeoboo / Kutts).</small>
  </div>

  <!-- MAIN -->
  <main class="card" id="app">
    <div class="top">
      <div>
        <div class="pill"><span class="dot"></span>
          <span id="toLine">For <b>Anamika</b> (aka Annama / Yeoboo / Kutts)</span>
        </div>
        <h1 id="headline">Hey Annamaâ€¦ yes, YOU â¤ï¸</h1>
        <p class="sub" id="subline">
          Youâ€™ve been stealing my heartâ€¦ so I made this tiny website because Iâ€™m romantic
          and also slightly dramatic. (Okay, very dramatic.)
        </p>
        <p class="sub" id="countdown" style="margin-top:8px; font-weight:1100;"></p>
      </div>

      <!-- PHOTO GALLERY -->
      <div class="galleryWrap">
        <div class="galleryMain">
          <img id="mainImg" alt="Us" />
        </div>
        <div class="galleryNav">
          <div class="gbtns">
            <button class="secondary" id="prevImg">â†</button>
            <button class="secondary" id="nextImg">â†’</button>
            <button class="btn-surprise" id="shuffleImg">Shuffle âœ¨</button>
          </div>
          <div class="thumbs" id="thumbs"></div>
          <p class="hint">Your photos are loaded âœ…</p>
        </div>
      </div>
    </div>

    <section class="grid">
      <div class="box">
        <h3>ğŸ«¶ Things I love</h3>
        <p id="box1">Your smile, your kindness, and how you make my whole day feel softer.</p>
      </div>
      <div class="box">
        <h3>ğŸ¥¹ My favorite memory</h3>
        <p id="box2">Honestly? Itâ€™s always the time I spend with you. Every moment with you counts as my favorite.</p>
      </div>
      <div class="box">
        <h3>ğŸ’— My promise</h3>
        <p id="box3">To keep choosing you, annoying you a little (cute), and loving you a lot (serious).</p>
      </div>
    </section>

    <!-- MAIN ACTIONS -->
    <section class="question">
      <div class="qtext" id="questionText">Ready for the â€œQuest to Valentineâ€? ğŸ˜ŒğŸ’˜</div>
      <div class="buttons">
        <button class="btn-yes" id="startQuestBtn">START GAME ğŸ®</button>
        <button class="btn-note" id="notesBtn">LOVE NOTES ğŸ’Œ</button>
        <button class="btn-memory" id="memoryBtn">MEMORY LANE ğŸ•°ï¸</button>
        <button class="btn-date" id="dateBtn">DATE PLAN ğŸ—“ï¸</button>
        <button class="btn-letter" id="letterBtn">LOVE LETTER ğŸ“</button>
      </div>
    </section>

    <!-- QUEST GAME PANEL -->
    <section class="panel" id="questPanel">
      <p class="panelTitle">Quest to Valentine ğŸ®ğŸ’–</p>
      <div class="quest">
        <div class="questTop">
          <span class="chip" id="levelChip">Level 1 / 5</span>
          <span class="chip" id="livesChip">Cuteness: âˆ</span>
          <span class="chip" id="progressChip">Progress: 0%</span>
        </div>

        <div class="qbox" id="questBox">
          <!-- injected -->
        </div>

        <p class="tiny" id="questHint"></p>
      </div>
    </section>

    <!-- LOVE NOTES -->
    <section class="panel" id="notesPanel">
      <p class="panelTitle">Open whenâ€¦ ğŸ’Œ</p>
      <div class="row">
        <button class="btn-note" id="noteBtn">Open a note âœ¨</button>
        <span class="counter" id="noteLine">Pick a note, Yeoboo ğŸ˜Œ</span>
      </div>
      <p class="tiny">You can edit the notes list in the code (search for <b>const notes =</b>).</p>
    </section>

    <!-- MEMORY LANE -->
    <section class="panel" id="memoryPanel">
      <p class="panelTitle">Memory lane ğŸ•°ï¸</p>
      <div class="timeline" id="timeline"></div>
      <p class="tiny">Edit these in the code (search for <b>timelineItems</b>).</p>
    </section>

    <!-- DATE PLAN -->
    <section class="panel" id="datePanel">
      <p class="panelTitle">Date plan (you choose, Iâ€™ll show up obsessed) ğŸ—“ï¸</p>
      <div class="dateCards">
        <div class="dcard">
          <h4>Cozy Night In ğŸ•¯ï¸</h4>
          <p>Snacks, a movie, cuddles, and me annoying you lovingly.</p>
          <button class="btn-date" data-plan="Cozy Night In ğŸ•¯ï¸">Pick this</button>
        </div>
        <div class="dcard">
          <h4>Little Date Out ğŸ°</h4>
          <p>Food, dessert, a walk, and holding hands like weâ€™re the main characters.</p>
          <button class="btn-date" data-plan="Little Date Out ğŸ°">Pick this</button>
        </div>
        <div class="dcard">
          <h4>Adventure Day ğŸŒ†</h4>
          <p>New place, pictures, laughs, and making a new â€œfavorite memoryâ€.</p>
          <button class="btn-date" data-plan="Adventure Day ğŸŒ†">Pick this</button>
        </div>
      </div>
      <p class="tiny" id="datePicked">No plan chosen yetâ€¦ (choose one, Annama ğŸ‘€)</p>
    </section>

    <!-- LOVE LETTER -->
    <section class="panel" id="letterPanel">
      <p class="panelTitle">A love letter for you ğŸ“</p>
      <div class="row">
        <button class="btn-letter" id="startLetterBtn">Start typing âœ¨</button>
        <button class="secondary" id="restartLetterBtn">Restart</button>
        <button class="btn-yes" id="skipLetterBtn">Skip to end</button>
      </div>
      <div class="letterBox" id="letterBox">
        <span id="typed"></span><span class="cursor">â–</span>
      </div>
      <p class="tiny">You can edit the letter text in the code (search for <b>const letterText</b>).</p>
    </section>

    <div class="footer">
      <span>Made for <b>Anamika</b> by <b>Apputy</b> â¤ï¸</span>
      <span>Tip: Everything is editable inside <code>index.html</code></span>
    </div>
  </main>

  <!-- FINAL MODAL -->
  <div class="modal" id="modal">
    <div class="modalCard" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <h2 class="modalTitle" id="modalTitle">ğŸ’–</h2>
      <p class="modalText" id="modalText"></p>
      <div class="closeRow">
        <button class="secondary" id="closeBtn">Close</button>
        <button id="copyBtn" class="btn-yes">Copy message</button>
      </div>
    </div>
  </div>

  <script>
    // =========================
    // PERSONALIZE
    // =========================
    const herName = "Anamika";
    const nick1 = "Annama";
    const nick2 = "Yeoboo";
    const nick3 = "Kutts";
    const yourName = "Apputy";

    const gateAnswers = [nick1, nick2, nick3, "annama", "yeoboo", "kutts"];

    const favoriteVibe = "Itâ€™s always the time I spend with you. Every moment with you counts as my favorite.";

    // Your photos
    const photos = ["IMG_4966.JPG","IMG_5015.JPG","IMG_5261.JPG","IMG_5548.JPG"];

    // The final message (exactly what you wrote)
    const finalMessage =
`valentines day oke elavarum aghoshikane ale pakshe enik agane specific day onnum illa cause i love youuu every day,every moment and every time..... also i wanted to say that you are the most pretty girl not from only outside but also from your heart that i have ever seen . Namude ini varan pokane future will be adipoloooo kuttaa trust me we will enjoy every bit of our life and we can live as a happy and peacefull family. So from day 1 you are my valentine enalum onnude choikaloo will you be my Valentine????`;

    // Quest levels (edit these anytime)
    // Each level can be:
    // - type: "mcq" (multiple choice)
    // - type: "input" (she types an answer)
    const questLevels = [
      {
        type: "mcq",
        title: "Level 1: Identify the main character ğŸ˜Œ",
        prompt: `Who is the prettiest girl (inside AND outside)?`,
        options: ["Anamika ğŸ˜Œ", "Random person", "The moon (nice try)"],
        correctIndex: 0,
        hint: "Hint: itâ€™s you, Annama. Always you."
      },
      {
        type: "input",
        title: "Level 2: Secret nickname gate ğŸ”‘",
        prompt: `Type ONE nickname Apputy calls you (any one).`,
        answers: ["annama","yeoboo","kutts"],
        hint: "Hint: Annama / Yeoboo / Kutts"
      },
      {
        type: "mcq",
        title: "Level 3: Apputyâ€™s favorite memory ğŸ¥¹",
        prompt: `Apputyâ€™s favorite memory with you isâ€¦`,
        options: ["Every time we are together", "Only one day", "Only when thereâ€™s food ğŸ˜¤"],
        correctIndex: 0,
        hint: "Hint: Every moment with you counts as the favorite."
      },
      {
        type: "mcq",
        title: "Level 4: Future vibes ğŸŒ™",
        prompt: `How is our future going to be?`,
        options: ["Adipoloooo ğŸ˜¤ğŸ’–", "Boring", "We will forget each other (never)"],
        correctIndex: 0,
        hint: "Hint: the answer has extra Oâ€™s ğŸ˜Œ"
      },
      {
        type: "final",
        title: "Final Level: The question ğŸ’˜",
        prompt: `Okay ${nick1}â€¦ you reached the final. Choose one:`,
        options: ["YES ğŸ’–", "YES, YEBOOO ğŸ˜¤ğŸ’"],
        hint: "Either way, youâ€™re getting a message from Apputy ğŸ˜Œ"
      }
    ];

    // Love notes
    const notes = [
      () => `${nick2}, if you miss meâ€¦ remember Iâ€™m probably missing you more. â€” ${yourName}`,
      () => `${nick1}, youâ€™re my favorite thought. I keep replaying your smile. â€” ${yourName}`,
      () => `${nick3}, you make my day softer. Even the hard ones. â€” ${yourName}`,
      () => `Open when you need hype: Iâ€™m proud of you. Always. â€” ${yourName}`,
      () => `Open when you feel unloved: impossible. Iâ€™m obsessed. â€” ${yourName}`,
      () => `Open when youâ€™re bored: come here. I have kisses. â€” ${yourName}`,
    ];

    // Timeline
    const timelineItems = [
      { tag: "Then", title: "The day I realizedâ€¦", text: "You werenâ€™t just special. You were *my* special." },
      { tag: "Now", title: "My favorite memory", text: "Every time Iâ€™m with you. Literally all of it." },
      { tag: "Always", title: "What I want", text: "More days with you, more laughs, more loveâ€¦ forever." },
    ];

    // Typewriter letter (optional â€“ you can keep or change)
    const letterText =
`Dear ${nick1},

You make my life softer and my heart happier.
My favorite memory is every moment with you.

Love,
${yourName} ğŸ’–`;

    // =========================
    // INIT TEXT
    // =========================
    document.title = `${herName} â¤ï¸`;
    document.getElementById("toLine").innerHTML = `For <b>${herName}</b> (aka ${nick1} / ${nick2} / ${nick3})`;
    document.getElementById("headline").textContent = `Hey ${nick1}â€¦ yes, YOU â¤ï¸`;
    document.getElementById("box2").textContent = `Honestly? ${favoriteVibe}`;
    document.getElementById("questionText").textContent = `Ready for the â€œQuest to Valentineâ€? ğŸ˜ŒğŸ’˜`;

    // Countdown
    const countdownEl = document.getElementById("countdown");
    function updateCountdown(){
      const now = new Date();
      const year = now.getFullYear();
      const target = new Date(year, 1, 14, 0, 0, 0);
      if(now > target) target.setFullYear(year + 1);
      const diff = target - now;
      const d = Math.floor(diff / (1000*60*60*24));
      const h = Math.floor((diff / (1000*60*60)) % 24);
      const m = Math.floor((diff / (1000*60)) % 60);
      countdownEl.textContent = `Countdown to Valentineâ€™s: ${d}d ${h}h ${m}m (and my heart is already yours) ğŸ’–`;
    }
    updateCountdown();
    setInterval(updateCountdown, 30_000);

    // Hearts
    const hearts = document.getElementById("hearts");
    for(let i=0;i<26;i++){
      const h = document.createElement("div");
      h.className = "heart";
      h.style.left = (Math.random()*100) + "vw";
      h.style.animationDuration = (7 + Math.random()*9) + "s";
      h.style.animationDelay = (Math.random()*-12) + "s";
      const size = 12 + Math.random()*18;
      h.style.width = size + "px";
      h.style.height = size + "px";
      h.style.opacity = (0.25 + Math.random()*0.55).toFixed(2);
      hearts.appendChild(h);
    }

    function sparkleBurst(count=10){
      for(let i=0;i<count;i++){
        const s = document.createElement("div");
        s.className = "sparkle";
        s.style.left = (Math.random()*window.innerWidth) + "px";
        s.style.top  = (Math.random()*window.innerHeight) + "px";
        document.body.appendChild(s);
        setTimeout(()=>s.remove(), 750);
      }
    }

    // =========================
    // PASSWORD GATE
    // =========================
    const gate = document.getElementById("gate");
    const gateInput = document.getElementById("gateInput");
    const gateBtn = document.getElementById("gateBtn");
    const app = document.getElementById("app");

    function normalize(s){ return (s || "").trim().toLowerCase(); }
    function unlock(){
      const val = normalize(gateInput.value);
      const ok = gateAnswers.map(normalize).includes(val);
      if(ok){
        gate.style.display = "none";
        app.classList.add("show");
        sparkleBurst(18);
        popConfetti(180, 1800);
      }else{
        gate.classList.remove("shake");
        void gate.offsetWidth;
        gate.classList.add("shake");
      }
    }
    gateBtn.addEventListener("click", unlock);
    gateInput.addEventListener("keydown", (e) => { if(e.key === "Enter") unlock(); });

    // =========================
    // GALLERY
    // =========================
    const mainImg = document.getElementById("mainImg");
    const thumbsEl = document.getElementById("thumbs");
    const prevImgBtn = document.getElementById("prevImg");
    const nextImgBtn = document.getElementById("nextImg");
    const shuffleImgBtn = document.getElementById("shuffleImg");
    let idx = 0;

    function setImg(i){
      idx = (i + photos.length) % photos.length;
      mainImg.src = photos[idx];
      [...thumbsEl.children].forEach((t, ti) => t.classList.toggle("active", ti === idx));
    }
    photos.forEach((src, i) => {
      const img = new Image(); img.src = src;
      const t = document.createElement("div");
      t.className = "thumb" + (i===0 ? " active" : "");
      t.innerHTML = `<img src="${src}" alt="thumb">`;
      t.addEventListener("click", () => { setImg(i); sparkleBurst(6); });
      thumbsEl.appendChild(t);
    });
    prevImgBtn.addEventListener("click", () => setImg(idx-1));
    nextImgBtn.addEventListener("click", () => setImg(idx+1));
    shuffleImgBtn.addEventListener("click", () => { setImg(Math.floor(Math.random()*photos.length)); sparkleBurst(12); });
    setImg(0);

    // =========================
    // PANELS
    // =========================
    function showOnly(panelId){
      const panels = ["questPanel","notesPanel","memoryPanel","datePanel","letterPanel"];
      panels.forEach(id => document.getElementById(id).classList.toggle("show", id === panelId));
      if(panelId) document.getElementById(panelId).scrollIntoView({behavior:"smooth", block:"center"});
    }

    document.getElementById("notesBtn").addEventListener("click", () => { showOnly("notesPanel"); sparkleBurst(10); });
    document.getElementById("memoryBtn").addEventListener("click", () => { showOnly("memoryPanel"); sparkleBurst(10); });
    document.getElementById("dateBtn").addEventListener("click", () => { showOnly("datePanel"); sparkleBurst(10); });
    document.getElementById("letterBtn").addEventListener("click", () => { showOnly("letterPanel"); sparkleBurst(10); });

    // =========================
    // QUEST GAME
    // =========================
    const startQuestBtn = document.getElementById("startQuestBtn");
    const questPanel = document.getElementById("questPanel");
    const questBox = document.getElementById("questBox");
    const questHint = document.getElementById("questHint");
    const levelChip = document.getElementById("levelChip");
    const progressChip = document.getElementById("progressChip");

    let levelIndex = 0;

    function updateQuestChips(){
      const total = questLevels.length;
      levelChip.textContent = `Level ${Math.min(levelIndex+1, total)} / ${total}`;
      progressChip.textContent = `Progress: ${Math.round((levelIndex/total)*100)}%`;
    }

    function renderLevel(){
      showOnly("questPanel");
      updateQuestChips();

      const L = questLevels[levelIndex];
      questHint.textContent = L.hint || "";

      if(L.type === "final"){
        questBox.innerHTML = `
          <h4>${L.title}</h4>
          <p>${L.prompt}</p>
          <div class="opts">
            <button class="btn-yes" id="finalA">${L.options[0]}</button>
            <button class="btn-yes" id="finalB">${L.options[1]}</button>
          </div>
        `;
        document.getElementById("finalA").addEventListener("click", () => finishQuest(L.options[0]));
        document.getElementById("finalB").addEventListener("click", () => finishQuest(L.options[1]));
        return;
      }

      if(L.type === "mcq"){
        const opts = L.options.map((o, i) => `<button class="opt" data-i="${i}">${o}</button>`).join("");
        questBox.innerHTML = `
          <h4>${L.title}</h4>
          <p>${L.prompt}</p>
          <div class="opts">${opts}</div>
        `;
        questBox.querySelectorAll(".opt").forEach(btn => {
          btn.addEventListener("click", () => {
            const i = Number(btn.getAttribute("data-i"));
            const correct = i === L.correctIndex;
            if(correct){
              btn.classList.add("correct");
              sparkleBurst(14);
              popConfetti(120, 1200);
              setTimeout(() => nextLevel(), 450);
            }else{
              btn.classList.add("wrong");
              sparkleBurst(6);
              questHint.textContent = `Hehe no ğŸ˜Œ Try again. ${L.hint || ""}`;
            }
          });
        });
      }

      if(L.type === "input"){
        questBox.innerHTML = `
          <h4>${L.title}</h4>
          <p>${L.prompt}</p>
          <div class="row">
            <input id="ansInput" placeholder="Type hereâ€¦" />
            <button class="btn-yes" id="submitAns">Submit âœ…</button>
          </div>
        `;
        const ansInput = document.getElementById("ansInput");
        const submitAns = document.getElementById("submitAns");

        function submit(){
          const val = normalize(ansInput.value);
          const ok = (L.answers || []).map(normalize).includes(val);
          if(ok){
            sparkleBurst(14);
            popConfetti(120, 1200);
            setTimeout(() => nextLevel(), 450);
          }else{
            sparkleBurst(6);
            questHint.textContent = `Nope ğŸ˜Œ Try again. ${L.hint || ""}`;
          }
        }

        submitAns.addEventListener("click", submit);
        ansInput.addEventListener("keydown", (e) => { if(e.key === "Enter") submit(); });
      }
    }

    function nextLevel(){
      levelIndex = Math.min(levelIndex + 1, questLevels.length - 1);
      renderLevel();
    }

    startQuestBtn.addEventListener("click", () => {
      levelIndex = 0;
      document.getElementById("questionText").textContent = `Quest started, ${nick2}â€¦ go win your message ğŸ˜¤ğŸ’–`;
      renderLevel();
    });

    // =========================
    // LOVE NOTES
    // =========================
    const noteLine = document.getElementById("noteLine");
    document.getElementById("noteBtn").addEventListener("click", () => {
      const pick = notes[Math.floor(Math.random()*notes.length)];
      noteLine.textContent = pick();
      sparkleBurst(10);
    });

    // =========================
    // MEMORY LANE render
    // =========================
    const timeline = document.getElementById("timeline");
    timelineItems.forEach(item => {
      const div = document.createElement("div");
      div.className = "titem";
      div.innerHTML = `
        <span class="badge">${item.tag}</span>
        <div class="ttext">
          <b>${item.title}</b>
          <span>${item.text}</span>
        </div>
      `;
      timeline.appendChild(div);
    });

    // =========================
    // DATE PLAN
    // =========================
    const datePicked = document.getElementById("datePicked");
    document.querySelectorAll('[data-plan]').forEach(btn => {
      btn.addEventListener("click", () => {
        const plan = btn.getAttribute("data-plan");
        datePicked.textContent = `Chosen plan: ${plan} ğŸ’–  (Apputy is excited and will bring extra love.)`;
        sparkleBurst(16);
        popConfetti(180, 1800);
      });
    });

    // =========================
    // LOVE LETTER (typewriter)
    // =========================
    const typedEl = document.getElementById("typed");
    const startLetterBtn = document.getElementById("startLetterBtn");
    const restartLetterBtn = document.getElementById("restartLetterBtn");
    const skipLetterBtn = document.getElementById("skipLetterBtn");

    let typing = false;
    let pos = 0;
    let timer = null;

    function resetLetter(){
      typing = false;
      pos = 0;
      clearInterval(timer);
      typedEl.textContent = "";
    }
    function typeStart(){
      if(typing) return;
      typing = true;
      clearInterval(timer);
      timer = setInterval(() => {
        const ch = letterText[pos++];
        if(ch === undefined){
          clearInterval(timer);
          typing = false;
          popConfetti(160, 1600);
          return;
        }
        typedEl.textContent += ch;
      }, 22);
    }
    startLetterBtn.addEventListener("click", () => { sparkleBurst(10); typeStart(); });
    restartLetterBtn.addEventListener("click", () => { sparkleBurst(6); resetLetter(); });
    skipLetterBtn.addEventListener("click", () => {
      sparkleBurst(10);
      clearInterval(timer);
      typedEl.textContent = letterText;
      typing = false;
      popConfetti(180, 1800);
    });

    // =========================
    // FINAL MESSAGE MODAL
    // =========================
    const modal = document.getElementById("modal");
    const modalTitle = document.getElementById("modalTitle");
    const modalText  = document.getElementById("modalText");
    const closeBtn   = document.getElementById("closeBtn");

    function openModal(title, text){
      modalTitle.textContent = title;
      modalText.textContent = text;
      modal.classList.add("open");
      sparkleBurst(14);
    }
    closeBtn.addEventListener("click", () => modal.classList.remove("open"));
    modal.addEventListener("click", (e) => { if(e.target === modal) modal.classList.remove("open"); });

    function finishQuest(choice){
      popConfetti(320, 3200);
      const title = choice.includes("YEBOOO") ? "YEBOOOOO ğŸ’ğŸ˜¤ğŸ’–" : "YAYYYYY ğŸ’–";
      openModal(title, finalMessage);
    }

    // Copy final message
    document.getElementById("copyBtn").addEventListener("click", async () => {
      try{
        await navigator.clipboard.writeText(finalMessage + `\n\nâ€” ${yourName}`);
        alert("Copied âœ…");
      }catch{
        alert("Clipboard blocked. Copy manually from the message.");
      }
    });

    // =========================
    // CONFETTI
    // =========================
    const confettiCanvas = document.getElementById("confetti");
    const ctx = confettiCanvas.getContext("2d");
    function resizeCanvas(){
      confettiCanvas.width = window.innerWidth;
      confettiCanvas.height = window.innerHeight;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    function popConfetti(pieces=240, durationMs=2600){
      confettiCanvas.classList.add("show");
      const confetti = [];
      for(let i=0;i<pieces;i++){
        confetti.push({
          x: Math.random()*confettiCanvas.width,
          y: -20 - Math.random()*confettiCanvas.height*0.2,
          r: 3 + Math.random()*5,
          vy: 2 + Math.random()*4.5,
          vx: -2 + Math.random()*4,
          a: Math.random()*Math.PI*2,
          va: -0.2 + Math.random()*0.4
        });
      }
      const start = performance.now();
      function draw(t){
        ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
        for(const p of confetti){
          p.x += p.vx;
          p.y += p.vy;
          p.a += p.va;
          p.vy += 0.02;
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.a);
          ctx.globalAlpha = 0.92;
          const hue = (p.x / confettiCanvas.width) * 360;
          ctx.fillStyle = `hsl(${hue}, 92%, 62%)`;
          ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.6);
          ctx.restore();
        }
        if(t - start < durationMs){
          requestAnimationFrame(draw);
        }else{
          confettiCanvas.classList.remove("show");
          ctx.clearRect(0,0,confettiCanvas.width, confettiCanvas.height);
        }
      }
      requestAnimationFrame(draw);
    }
  </script>
</body>
</html>
